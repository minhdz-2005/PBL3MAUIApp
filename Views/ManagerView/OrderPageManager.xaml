<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
  x:Class="PBL3MAUIApp.Views.ManagerView.OrderPageManager"
  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
  BackgroundColor="#F7EFE9"
  ControlTemplate="{StaticResource SharedManagerPageTemplate}">
  <AbsoluteLayout>
    <Grid
      AbsoluteLayout.LayoutBounds="0,0,1,1"
      AbsoluteLayout.LayoutFlags="All"
      BackgroundColor="Transparent"
      RowDefinitions="Auto,*">
      <Label
        Grid.Row="0"
        Margin="0,30,0,20"
        FontAttributes="Bold"
        FontSize="28"
        HorizontalOptions="Center"
        Text="Thống kê Order"
        TextColor="Black" />
      <Frame
        Grid.Row="1"
        Margin="100,0,100,10"
        Padding="10"
        BackgroundColor="Transparent"
        BorderColor="Black">

        <Grid RowDefinitions="Auto, *">
          <!--  Header: Bộ lọc ngày  -->
          <Frame
            Padding="15"
            BackgroundColor="#F4A460"
            CornerRadius="10"
            HasShadow="True">
            <Grid ColumnDefinitions="*, Auto">
              <Label
                Margin="5,0"
                BackgroundColor="Transparent"
                FontAttributes="Bold"
                FontSize="30"
                HorizontalOptions="Center"
                Text="20/02/2025"
                TextColor="Black" />
              <Button
                Margin="10,0,0,0"
                Padding="10,5"
                BackgroundColor="Transparent"
                Clicked="OnFilterClicked"
                CornerRadius="5"
                FontSize="20"
                HorizontalOptions="End"
                Text="Lọc"
                TextColor="Black" />
            </Grid>
          </Frame>

          <!--  Main Content: Ca làm và Chi tiết  -->
          <Grid
            Grid.Row="1"
            Margin="0,10,0,0"
            ColumnDefinitions="2*, 4*"
            RowSpacing="10">

            <!--  Phần ca làm  -->
            <ScrollView Grid.Column="0">
              <VerticalStackLayout Spacing="10" VerticalOptions="Center">
                <Frame
                  x:Name="FirstShift"
                  Margin="0,0,0,10"
                  Padding="10"
                  BackgroundColor="#FFEFD5"
                  CornerRadius="8"
                  HasShadow="True">
                  <Frame.GestureRecognizers>
                    <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="OnShiftClicked" />
                  </Frame.GestureRecognizers>
                  <Grid ColumnDefinitions="*, *" RowDefinitions="Auto, Auto">
                    <Label
                      Grid.Row="0"
                      Grid.Column="0"
                      FontSize="16"
                      Text="Ca 1: 6h30 - 12h"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="1"
                      Grid.Column="0"
                      FontSize="16"
                      Text="Đã đóng"
                      TextColor="Red"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="0"
                      Grid.Column="1"
                      FontSize="16"
                      HorizontalOptions="End"
                      Text="10.000.000 VNĐ"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="1"
                      Grid.Column="1"
                      FontSize="16"
                      HorizontalOptions="End"
                      Text="Số đơn: 20"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                  </Grid>
                </Frame>
                <!--  ca 2  -->
                <Frame
                  x:Name="SecondShift"
                  Margin="0,0,0,10"
                  Padding="10"
                  BackgroundColor="#FFEFD5"
                  CornerRadius="8"
                  HasShadow="True">
                  <Frame.GestureRecognizers>
                    <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="OnShiftClicked" />
                  </Frame.GestureRecognizers>
                  <Grid ColumnDefinitions="*, *" RowDefinitions="Auto, Auto">
                    <Label
                      Grid.Row="0"
                      Grid.Column="0"
                      FontSize="16"
                      Text="Ca 2: 12h - 17h30"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="1"
                      Grid.Column="0"
                      FontSize="16"
                      Text="Đã đóng"
                      TextColor="Red"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="0"
                      Grid.Column="1"
                      FontSize="16"
                      HorizontalOptions="End"
                      Text="10.000.000 VNĐ"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="1"
                      Grid.Column="1"
                      FontSize="16"
                      HorizontalOptions="End"
                      Text="Số đơn: 20"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                  </Grid>
                </Frame>
                <!--  ca 3  -->
                <Frame
                  x:Name="ThirdShift"
                  Margin="0,0,0,10"
                  Padding="10"
                  BackgroundColor="#FFEFD5"
                  CornerRadius="8"
                  HasShadow="True">
                  <Frame.GestureRecognizers>
                    <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="OnShiftClicked" />
                  </Frame.GestureRecognizers>
                  <Grid ColumnDefinitions="*, *" RowDefinitions="Auto, Auto">
                    <Label
                      Grid.Row="0"
                      Grid.Column="0"
                      FontSize="16"
                      Text="Ca 3: 17h30 - 23h"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="1"
                      Grid.Column="0"
                      FontSize="16"
                      Text="Đã đóng"
                      TextColor="Red"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="0"
                      Grid.Column="1"
                      FontSize="16"
                      HorizontalOptions="End"
                      Text="10.000.000 VNĐ"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                    <Label
                      Grid.Row="1"
                      Grid.Column="1"
                      FontSize="16"
                      HorizontalOptions="End"
                      Text="Số đơn: 20"
                      TextColor="#333333"
                      VerticalOptions="Center" />
                  </Grid>
                </Frame>
              </VerticalStackLayout>
            </ScrollView>

            <!--  Phần chi tiết ca làm  -->
            <Frame
              Grid.Column="1"
              BackgroundColor="#FFFFFF"
              CornerRadius="10"
              HasShadow="True">
              <ScrollView>
                <VerticalStackLayout Spacing="10">
                  <Label
                    FontAttributes="Bold"
                    FontSize="20"
                    Text="Chi tiết ca làm"
                    TextColor="#333333" />

                  <!--  Đơn hàng 1  -->
                  <Frame
                    Margin="0,0,0,5"
                    Padding="10"
                    BackgroundColor="#F5F5F5"
                    CornerRadius="5">
                    <Grid ColumnDefinitions="Auto, *,*" RowDefinitions="Auto, Auto">
                      <Label
                        Grid.Row="0"
                        Grid.Column="0"
                        FontSize="16"
                        Text="Mã đơn: 123456"
                        TextColor="#333333" />
                      <Label
                        Grid.Row="1"
                        Grid.Column="0"
                        FontSize="16"
                        Text="Số tiền: 50.000 VNĐ"
                        TextColor="#333333" />
                      <Label
                        Grid.Row="0"
                        Grid.Column="1"
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Thời gian: 10:00"
                        TextColor="#666666" />
                      <Label
                        Grid.Row="1"
                        Grid.Column="1"
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Trạng thái: Đã thanh toán"
                        TextColor="#666666" />
                      <Button
                        Grid.RowSpan="2"
                        Grid.Column="2"
                        BackgroundColor="Transparent"
                        Clicked="OnViewDetailClicked"
                        HorizontalOptions="End"
                        Text="Xem chi tiết&gt;&gt;"
                        TextColor="Black" />
                    </Grid>
                  </Frame>

                  <!--  Đơn hàng 2  -->
                  <Frame
                    Margin="0,0,0,5"
                    Padding="10"
                    BackgroundColor="#F5F5F5"
                    CornerRadius="5">
                    <Grid ColumnDefinitions="Auto, *,*" RowDefinitions="Auto, Auto">
                      <Label
                        Grid.Row="0"
                        Grid.Column="0"
                        FontSize="16"
                        Text="Mã đơn: 123457"
                        TextColor="#333333" />
                      <Label
                        Grid.Row="1"
                        Grid.Column="0"
                        FontSize="16"
                        Text="Số tiền: 60.000 VNĐ"
                        TextColor="#333333" />
                      <Label
                        Grid.Row="0"
                        Grid.Column="1"
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Thời gian: 10:30"
                        TextColor="#666666" />
                      <Label
                        Grid.Row="1"
                        Grid.Column="1"
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Trạng thái: Đã thanh toán"
                        TextColor="#666666" />
                      <Button
                        Grid.RowSpan="2"
                        Grid.Column="2"
                        BackgroundColor="Transparent"
                        Clicked="OnViewDetailClicked"
                        HorizontalOptions="End"
                        Text="Xem chi tiết&gt;&gt;"
                        TextColor="Black" />
                    </Grid>
                  </Frame>

                  <!--  Đơn hàng 3  -->
                  <Frame
                    Margin="0,0,0,5"
                    Padding="10"
                    BackgroundColor="#F5F5F5"
                    CornerRadius="5">
                    <Grid ColumnDefinitions="Auto, *,*" RowDefinitions="Auto, Auto">
                      <Label
                        Grid.Row="0"
                        Grid.Column="0"
                        FontSize="16"
                        Text="Mã đơn: 123458"
                        TextColor="#333333" />
                      <Label
                        Grid.Row="1"
                        Grid.Column="0"
                        FontSize="16"
                        Text="Số tiền: 70.000 VNĐ"
                        TextColor="#333333" />
                      <Label
                        Grid.Row="0"
                        Grid.Column="1"
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Thời gian: 11:00"
                        TextColor="#666666" />
                      <Label
                        Grid.Row="1"
                        Grid.Column="1"
                        FontSize="14"
                        HorizontalOptions="Center"
                        Text="Trạng thái: Đã thanh toán"
                        TextColor="#666666" />
                      <Button
                        Grid.RowSpan="2"
                        Grid.Column="2"
                        BackgroundColor="Transparent"
                        Clicked="OnViewDetailClicked"
                        HorizontalOptions="End"
                        Text="Xem chi tiết&gt;&gt;"
                        TextColor="Black" />
                    </Grid>
                  </Frame>

                  <!--  Tổng doanh thu ca  -->
                  <Label
                    FontAttributes="Bold"
                    FontSize="16"
                    HorizontalOptions="End"
                    Text="Tổng doanh thu ca: 180.000 VNĐ"
                    TextColor="#4A90E2" />
                </VerticalStackLayout>
              </ScrollView>
            </Frame>
          </Grid>
        </Grid>
      </Frame>
    </Grid>
    <!--  Popup lọc  -->
    <Grid
      x:Name="FilterPopupOverlay"
      AbsoluteLayout.LayoutBounds="0, 0, 1, 1"
      AbsoluteLayout.LayoutFlags="All"
      BackgroundColor="#80000000"
      IsVisible="False">
      <ContentView
        x:Name="FilterPopup"
        Padding="20"
        AbsoluteLayout.LayoutBounds="0.5, 0.5, 400, 300"
        AbsoluteLayout.LayoutFlags="PositionProportional"
        BackgroundColor="#F7EFE9">
        <Frame Margin="200,0,200,300" BackgroundColor="White">
          <VerticalStackLayout Spacing="10">
            <Label
              FontAttributes="Bold"
              FontSize="25"
              HorizontalOptions="Center"
              Text="LỌC THEO NGÀY"
              TextColor="Black" />
            <Border
              Padding="10"
              BackgroundColor="Transparent"
              Stroke="#F2E2D6"
              StrokeShape="RoundRectangle 10"
              StrokeThickness="1">
              <DatePicker
                x:Name="FilterDatePicker"
                FontSize="16"
                Format="dd/MM/yyyy"
                MaximumDate="01/01/2030"
                MinimumDate="01/01/2020" />
            </Border>
            <Grid ColumnDefinitions="*,*">
              <Button
                Grid.Column="0"
                Clicked="OnApplyFilterClicked"
                HorizontalOptions="Center"
                Text="Áp dụng" />
              <Button
                Grid.Column="1"
                BackgroundColor="Red"
                Clicked="OnCancelFilterClicked"
                HorizontalOptions="Center"
                Text="Hủy"
                TextColor="White" />
            </Grid>
          </VerticalStackLayout>
        </Frame>
      </ContentView>
    </Grid>

    <!--  Popup xem chi tiết  -->
    <Grid
      x:Name="DetailPopupOverlay"
      AbsoluteLayout.LayoutBounds="0, 0, 1, 1"
      AbsoluteLayout.LayoutFlags="All"
      BackgroundColor="#80000000"
      IsVisible="False">
      <ContentView
        x:Name="DetailPopup"
        Padding="20"
        AbsoluteLayout.LayoutBounds="0.5, 0.5, 400, 400"
        AbsoluteLayout.LayoutFlags="PositionProportional"
        BackgroundColor="#F7EFE9">
        <Frame Margin="200,0,200,300" BackgroundColor="White">
          <ScrollView>
            <VerticalStackLayout Spacing="10">
              <Label
                FontAttributes="Bold"
                FontSize="25"
                HorizontalOptions="Center"
                Text="CHI TIẾT ĐƠN HÀNG"
                TextColor="Black" />
              <Border
                Padding="10"
                BackgroundColor="Transparent"
                Stroke="#F2E2D6"
                StrokeShape="RoundRectangle 10"
                StrokeThickness="1">
                <Label
                  x:Name="DetailOrderIdLabel"
                  FontSize="16"
                  Text="Mã đơn: 123456" />
              </Border>
              <Border
                Padding="10"
                BackgroundColor="Transparent"
                Stroke="#F2E2D6"
                StrokeShape="RoundRectangle 10"
                StrokeThickness="1">
                <Label
                  x:Name="DetailAmountLabel"
                  FontSize="16"
                  Text="Số tiền: 50.000 VNĐ" />
              </Border>
              <Border
                Padding="10"
                BackgroundColor="Transparent"
                Stroke="#F2E2D6"
                StrokeShape="RoundRectangle 10"
                StrokeThickness="1">
                <Label
                  x:Name="DetailTimeLabel"
                  FontSize="16"
                  Text="Thời gian: 10:00" />
              </Border>
              <Border
                Padding="10"
                BackgroundColor="Transparent"
                Stroke="#F2E2D6"
                StrokeShape="RoundRectangle 10"
                StrokeThickness="1">
                <Label
                  x:Name="DetailStatusLabel"
                  FontSize="16"
                  Text="Trạng thái: Đã thanh toán" />
              </Border>
              <Border
                Padding="10"
                BackgroundColor="Transparent"
                Stroke="#F2E2D6"
                StrokeShape="RoundRectangle 10"
                StrokeThickness="1">
                <Label
                  x:Name="DetailItemsLabel"
                  FontSize="16"
                  Text="Sản phẩm: Cà phê đen, Trà sữa" />
              </Border>
              <Button
                Clicked="OnCloseDetailClicked"
                HorizontalOptions="Center"
                Text="Đóng" />
            </VerticalStackLayout>
          </ScrollView>
        </Frame>
      </ContentView>
    </Grid>
  </AbsoluteLayout>
</ContentPage>
